apiVersion: apps/v1beta2
kind: Deployment
metadata:
  annotations:
  generation: 1
  labels:
    io.kompose.service: datasync
  name: datasync
spec:
  replicas: 1
  selector:
    matchLabels:
      io.kompose.service: datasync
  strategy:
    type: Recreate
  template:
    metadata:
      annotations:
      labels:
        io.kompose.service: datasync
    spec:
      containers:
      - name: datasync
        image: highlanderdantas/datasync:v1.4
        imagePullPolicy: Always
        command: ["/bin/sh", "-c"]
        args:
        - sudo chown -R mgeweb:mgeweb /home/mgeweb/pacotes-datasync/ && java -jar /home/mgeweb/DDM/docker-datasync-manager.jar  && sleep 5 && sudo chown -R mgeweb:mgeweb /home/mgeweb/DataSync/ && /home/mgeweb/DDM/scripts/./run-datasync.sh && /home/mgeweb/DataSync/./datasync-service start && sleep 15 && tail -f /home/mgeweb/DataSync/log/server.log
        resources: {}
        securityContext:
          allowPrivilegeEscalation: true
          capabilities: {}
          privileged: true
          procMount: Default
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /home/mgeweb/DataSync/conf
          name: sanesocial-claim0
          subPath: highlander/datasync/conf
        - mountPath: /home/mgeweb/DataSync/email
          name: sanesocial-claim0
          subPath: highlander/datasync/email
        - mountPath: /home/mgeweb/DataSync/exported
          name: sanesocial-claim0
          subPath: highlander/datasync/exported
        - mountPath: /home/mgeweb/DataSync/filetransfer_home
          name: sanesocial-claim0
          subPath: highlander/datasync/filetransfer_home
        - mountPath: /home/mgeweb/DataSync/log
          name: sanesocial-claim0
          subPath: highlander/datasync/log
        - mountPath: /home/mgeweb/DataSync/processed
          name: sanesocial-claim0
          subPath: highlander/datasync/processed
        - mountPath: /home/mgeweb/DataSync/sync
          name: sanesocial-claim0
          subPath: highlander/datasync/sync
        - mountPath: /home/mgeweb/DataSync/tracking
          name: sanesocial-claim0
          subPath: highlander/datasync/tracking
        - mountPath: /home/mgeweb/DataSync/work
          name: sanesocial-claim0
          subPath: highlander/datasync/work
        - mountPath: /home/mgeweb/pacotes-datasync/
          name: sanesocial-claim0
          subPath: highlander/datasync/pacotes/datasync
      dnsPolicy: ClusterFirstWithHostNet
      hostNetwork: true
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 0
      volumes:
      - name: sanesocial-claim0
        persistentVolumeClaim:
          claimName: sanesocial-claim0
status: {}
